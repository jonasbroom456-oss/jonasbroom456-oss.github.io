<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Essay Generator</title>
</head>
<body>
  <h1>AI Essay Generator</h1>
  <textarea id="prompt" rows="4" cols="50" placeholder="Type your essay prompt..."></textarea>
  <br>
  <input type="number" id="wordCount" placeholder="Word count (e.g. 200)">
  <button id="generate">Generate Essay</button>
  <p id="status"></p>
  <div id="output"></div>

  <script type="module">
    import { pipeline } from 'https://cdn.jsdelivr.net/npm/@xenova/transformers';

    const generateBtn = document.getElementById('generate');
    const status = document.getElementById('status');
    const output = document.getElementById('output');

    let generator;

    async function loadModel() {
      status.textContent = 'Loading model...';
      generator = await pipeline('text-generation', 'Xenova/gpt2');
      status.textContent = 'Model loaded!';
    }

    async function generateEssay() {
      const prompt = document.getElementById('prompt').value.trim();
      const wordCount = parseInt(document.getElementById('wordCount').value) || 200;

      if (!prompt) return alert('Please enter a prompt!');
      status.textContent = 'Generating essay...';

      const tokens = Math.floor(wordCount * 1.3); // rough estimate
      const result = await generator(prompt, {
        max_new_tokens: tokens,
        temperature: 0.8,
        top_p: 0.9,
      });

      output.textContent = result[0].generated_text;
      status.textContent = 'Done!';
    }

    generateBtn.addEventListener('click', generateEssay);

    loadModel();
  </script>
</body>
</html>
